[phases.setup]
nixPkgs = [
    "stdenv",
    "gcc",
    "postgresql",
    "zlib",
    "python3",
    "python3Packages.pip"
]

[env]
PYTHON_VERSION = "3"
PATH = "/usr/bin:$PATH"

[phases.build]
cmds = [
    "/usr/bin/python3 -m venv --copies /opt/venv",
    ". /opt/venv/bin/activate",
    "pip install -r requirements.txt"
]

[start]
cmd = "gunicorn a_core.wsgi" 